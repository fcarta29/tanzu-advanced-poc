# SC02-TC08: Service Mesh Lifecycle Management

After provisioning a Tanzu Kubernetes cluster, a DevOps Engineer can enable a service mesh on the cluster and then manage that cluster with a global Tanzu Service Mesh (TSM) control plane.

---

## Test Case Summary

This test case procedure demonstrates how a DevOps Engineer can lifecycle (enable, upgrade, and remove) service mesh capabilities on Kubernetes clusters with TSM.

---

## Prerequisites

* Completion of [SC01-TC01](../operator/sc01-tc01.md), [SC01-TC02](../operator/sc01-tc02.md), [SC02-TC01](../operator/sc02-tc01.md)
* DevOps Engineer console and user credentials
* TSM enabled Kubernetes Cluster

  1. Install TSM extension in TMC. From the TMC portal click on **Administration** in the left menu and then select the **Integrations** tab on the main window pane. If not already enabled click to **ENABLE** Tanzu Service Mesh.

  2. From TMC, install TSM in a cluster and onboard it. 

---

## Test Procedure

1. Using the **DevOps Engineer** console and credentials, login to the SC API. 

    <pre>kubectl vsphere login --vsphere-username ***DevOps_UserName***@vsphere.local --server=https://<b><i>SC_API_VIP</i></b>--insecure-skip-tls-verify</pre>

    Expected:
    <pre>Logged in successfully. <br> You have access to the following contexts: <br><b><i>SC_API_VIP</i></b><br>ns01</pre> 

2. Set the context for the *ns01* namespace with the command

    ```execute
    kubectl config use-context ns01
    ```

Onboard a cluster on TSM with current version of K8s. 

2. Onboard a cluster on TSM with an old version of K8s.

3. In the onboarding, select which namespaces you want to exclude.

4. Deploy an application in both a namespace that has TSM and another that does not to show that only one shows in TSM UI and pods get sidecars (proxy container)attached.

5. See that the TSM data plane versions installed are different in both clusters: the one with thecurrent K8s version, and the other with the old version of K8s.

6. Upgrade theK8s version in the cluster with the old versionof K8s and upgrade the TSM data plane on it.

7. Remove one cluster from TSM directly.

8. From TMC, uninstallTSM from the cluster.